<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HK Stock Options Explorer | Real HKEX Data</title>
  <meta name="description"
    content="Explore Hong Kong stock options with real HKEX settlement data. Build strategies, analyze Greeks, and project trends.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="/src/index.css">
</head>

<body>
  <!-- Password Gate -->
  <div id="authGate" class="auth-gate">
    <div class="auth-card">
      <div class="auth-icon">â—†</div>
      <h2>HK Options <span class="accent">Explorer</span></h2>
      <p class="auth-subtitle">Enter password to access the application</p>
      <div class="auth-form">
        <input type="password" id="authPassword" class="auth-input" placeholder="Password" autocomplete="off">
        <button class="btn btn-primary btn-glow auth-btn" id="authSubmit">Unlock</button>
      </div>
      <p class="auth-error" id="authError"></p>
      <p class="auth-footer">Proof of Concept Â· Not Financial Advice</p>
    </div>
  </div>

  <div id="app" style="display:none">
    <!-- Header -->
    <header class="app-header">
      <div class="header-left">
        <div class="logo">
          <span class="logo-icon">â—†</span>
          <h1>HK Options <span class="accent">Explorer</span></h1>
        </div>
        <span class="badge">HKEX DTOP Data</span>
      </div>
      <div class="header-right">
        <div class="stock-selector" id="stockSelectorWrap">
          <label for="stockSelector">Stock</label>
          <select id="stockSelector">
            <option value="">Loading...</option>
          </select>
        </div>
        <div class="date-selector">
          <label for="dateSelector">Date</label>
          <select id="dateSelector">
            <option value="">Loading...</option>
          </select>
        </div>
      </div>
    </header>

    <!-- Tabs -->
    <nav class="tabs" id="tabs">
      <button class="tab active" data-tab="dashboard">
        <span class="tab-icon">ğŸ“Š</span> Dashboard
      </button>
      <button class="tab" data-tab="chain">
        <span class="tab-icon">â›“ï¸</span> Options Chain
      </button>
      <button class="tab" data-tab="strategy">
        <span class="tab-icon">ğŸ¯</span> Strategy Builder
      </button>
      <button class="tab" data-tab="trends">
        <span class="tab-icon">ğŸ“ˆ</span> Trend Analysis
      </button>
      <button class="tab" data-tab="prediction">
        <span class="tab-icon">ğŸ¤–</span> AI Prediction
      </button>
    </nav>

    <!-- Tab Content -->
    <main class="content">
      <!-- Dashboard Tab -->
      <section class="tab-panel active" id="panel-dashboard">
        <div class="dashboard-stats" id="dashboardStats"></div>
        <div class="dashboard-grid">
          <div class="card glass" id="topStocksCard">
            <h3>Top Stocks by Open Interest</h3>
            <div id="topStocksTable"></div>
          </div>
          <div class="card glass" id="marketOverviewCard">
            <h3>Market Overview</h3>
            <canvas id="marketChart"></canvas>
          </div>
        </div>
        <details class="edu-section card glass">
          <summary class="edu-toggle">ğŸ“š Options Basics â€” What Are Stock Options?</summary>
          <div class="edu-content">
            <div class="edu-grid">
              <div class="edu-block">
                <h4>ğŸ“ What is an Option?</h4>
                <p>An option gives you the <strong>right (not obligation)</strong> to buy or sell a stock at a set price
                  (the <em>strike price</em>) before a specific date (the <em>expiry</em>).</p>
                <div class="edu-formula">Premium = Intrinsic Value + Time Value</div>
              </div>
              <div class="edu-block">
                <h4>ğŸ“ Call vs ğŸ“‰ Put</h4>
                <p><strong>Call Option</strong> â€” Right to <em>buy</em> the stock. You profit if the stock goes up.</p>
                <p><strong>Put Option</strong> â€” Right to <em>sell</em> the stock. You profit if the stock goes down.
                </p>
              </div>
              <div class="edu-block">
                <h4>ğŸ’° Key Terms</h4>
                <table class="edu-table">
                  <tr>
                    <td><strong>Strike Price (K)</strong></td>
                    <td>The price at which you can buy/sell the stock</td>
                  </tr>
                  <tr>
                    <td><strong>Expiry Date</strong></td>
                    <td>The deadline for exercising the option</td>
                  </tr>
                  <tr>
                    <td><strong>Premium</strong></td>
                    <td>The price you pay to buy the option</td>
                  </tr>
                  <tr>
                    <td><strong>Open Interest (OI)</strong></td>
                    <td>Total number of outstanding contracts</td>
                  </tr>
                  <tr>
                    <td><strong>Settlement Price</strong></td>
                    <td>Official closing price from the exchange (SEOCH)</td>
                  </tr>
                </table>
              </div>
              <div class="edu-block">
                <h4>ğŸ¯ Moneyness</h4>
                <table class="edu-table">
                  <tr>
                    <td><strong>In The Money (ITM)</strong></td>
                    <td>Call: S &gt; K Â· Put: S &lt; K â€” has intrinsic value</td>
                  </tr>
                  <tr>
                    <td><strong>At The Money (ATM)</strong></td>
                    <td>S â‰ˆ K â€” strike near current price</td>
                  </tr>
                  <tr>
                    <td><strong>Out of The Money (OTM)</strong></td>
                    <td>Call: S &lt; K Â· Put: S &gt; K â€” no intrinsic value</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </details>
      </section>

      <!-- Options Chain Tab -->
      <section class="tab-panel" id="panel-chain">
        <div class="chain-controls">
          <div class="expiry-selector">
            <label for="expirySelector">Expiry</label>
            <select id="expirySelector">
              <option value="">Select a stock first</option>
            </select>
          </div>
          <div class="chain-info" id="chainInfo"></div>
        </div>
        <div class="card glass chain-table-wrap">
          <div class="chain-table-container" id="chainTableContainer">
            <p class="placeholder-text">Select a stock and expiry to view the options chain</p>
          </div>
        </div>
        <details class="edu-section card glass">
          <summary class="edu-toggle">ğŸ“š Reading the Options Chain</summary>
          <div class="edu-content">
            <div class="edu-grid">
              <div class="edu-block">
                <h4>ğŸ“– How to Read the Table</h4>
                <p>The options chain shows <strong>calls on the left</strong> and <strong>puts on the right</strong>,
                  with the <strong>strike price in the center</strong>.</p>
                <table class="edu-table">
                  <tr>
                    <td><strong>Settle</strong></td>
                    <td>Official settlement (closing) price from SEOCH</td>
                  </tr>
                  <tr>
                    <td><strong>Chg</strong></td>
                    <td>Price change from previous day's settlement</td>
                  </tr>
                  <tr>
                    <td><strong>IV</strong></td>
                    <td>Implied Volatility â€” market's expected future volatility (higher = more expensive)</td>
                  </tr>
                  <tr>
                    <td><strong>Volume</strong></td>
                    <td>Number of contracts traded today</td>
                  </tr>
                  <tr>
                    <td><strong>OI</strong></td>
                    <td>Open Interest â€” total outstanding contracts (higher = more liquid)</td>
                  </tr>
                </table>
              </div>
              <div class="edu-block">
                <h4>ğŸ“ Implied Volatility (IV)</h4>
                <p>IV represents the market's expectation of future price movement. It is <em>implied</em> from the
                  option price using the Black-Scholes model:</p>
                <div class="edu-formula">Given the market price, solve for Ïƒ in:<br>C = SÂ·N(dâ‚) âˆ’ KÂ·eâ»Ê³áµ€Â·N(dâ‚‚)</div>
                <p>Higher IV â†’ more expensive options (more uncertainty)</p>
              </div>
              <div class="edu-block">
                <h4>ğŸ’¡ Tips for Beginners</h4>
                <p>â€¢ <strong>High OI + High Volume</strong> = liquid contract (easier to trade)</p>
                <p>â€¢ <strong>ATM options</strong> have the most time value</p>
                <p>â€¢ <strong>Deep ITM</strong> options behave like the stock itself</p>
                <p>â€¢ <strong>OTM options</strong> are cheaper but expire worthless more often</p>
              </div>
            </div>
          </div>
        </details>
      </section>

      <!-- Strategy Builder Tab -->
      <section class="tab-panel" id="panel-strategy">
        <div class="strategy-controls">
          <div class="card glass strategy-config">
            <h3>Strategy Configuration</h3>
            <div class="form-group">
              <label for="strategyType">Strategy</label>
              <select id="strategyType">
                <option value="covered-call">Covered Call</option>
                <option value="protective-put">Protective Put</option>
                <option value="collar">Collar</option>
                <option value="bull-spread">Bull Call Spread</option>
                <option value="bear-spread">Bear Put Spread</option>
                <option value="straddle">Long Straddle</option>
                <option value="strangle">Long Strangle</option>
              </select>
            </div>
            <div class="form-group">
              <label for="strategyExpiry">Expiry</label>
              <select id="strategyExpiry">
                <option value="">Select stock first</option>
              </select>
            </div>
            <div id="strategyLegs" class="strategy-legs"></div>
            <button class="btn btn-primary" id="buildStrategyBtn">Build Strategy</button>
          </div>
          <div class="card glass strategy-info">
            <h3>Strategy Summary</h3>
            <div id="strategySummary" class="strategy-summary">
              <p class="placeholder-text">Configure a strategy to see analysis</p>
            </div>
          </div>
        </div>
        <div class="card glass">
          <h3>Payoff Diagram</h3>
          <canvas id="payoffChart"></canvas>
        </div>
        <div class="card glass">
          <h3>Greeks Profile</h3>
          <div id="greeksDisplay" class="greeks-grid"></div>
        </div>

        <details class="edu-section card glass">
          <summary class="edu-toggle">ğŸ“š Strategy Formulas & Payoff Equations</summary>
          <div class="edu-content">
            <div class="edu-grid">
              <div class="edu-block">
                <h4>ğŸ”µ Covered Call</h4>
                <p><strong>Setup:</strong> Buy stock + Sell call at strike K</p>
                <div class="edu-formula">Payoff = (S âˆ’ Sâ‚€) + min(K âˆ’ S, 0) + C<br>Max Profit = (K âˆ’ Sâ‚€) + C<br>Max Loss
                  = Sâ‚€ âˆ’ C (if stock â†’ 0)<br>Breakeven = Sâ‚€ âˆ’ C</div>
                <p class="edu-hint">ğŸ“Œ Best when: Mildly bullish, want income from the premium</p>
              </div>
              <div class="edu-block">
                <h4>ğŸŸ¢ Protective Put</h4>
                <p><strong>Setup:</strong> Buy stock + Buy put at strike K</p>
                <div class="edu-formula">Payoff = (S âˆ’ Sâ‚€) + max(K âˆ’ S, 0) âˆ’ P<br>Max Profit = Unlimited (stock
                  upside)<br>Max Loss = Sâ‚€ âˆ’ K + P<br>Breakeven = Sâ‚€ + P</div>
                <p class="edu-hint">ğŸ“Œ Best when: Bullish but want insurance against a crash</p>
              </div>
              <div class="edu-block">
                <h4>ğŸŸ¡ Collar</h4>
                <p><strong>Setup:</strong> Buy stock + Buy put (Kâ‚) + Sell call (Kâ‚‚)</p>
                <div class="edu-formula">Payoff = (S âˆ’ Sâ‚€) + max(Kâ‚ âˆ’ S, 0) âˆ’ min(S âˆ’ Kâ‚‚, 0) âˆ’ P + C<br>Max Profit = Kâ‚‚
                  âˆ’ Sâ‚€ âˆ’ P + C<br>Max Loss = Sâ‚€ âˆ’ Kâ‚ + P âˆ’ C<br>Breakeven = Sâ‚€ + P âˆ’ C</div>
                <p class="edu-hint">ğŸ“Œ Best when: Want to cap both risk and reward at low cost</p>
              </div>
              <div class="edu-block">
                <h4>ğŸ”¼ Bull Call Spread</h4>
                <p><strong>Setup:</strong> Buy call (Kâ‚) + Sell call (Kâ‚‚), where Kâ‚ &lt; Kâ‚‚</p>
                <div class="edu-formula">Payoff = max(S âˆ’ Kâ‚, 0) âˆ’ max(S âˆ’ Kâ‚‚, 0) âˆ’ Net Debit<br>Max Profit = (Kâ‚‚ âˆ’ Kâ‚)
                  âˆ’ Net Debit<br>Max Loss = Net Debit<br>Breakeven = Kâ‚ + Net Debit</div>
                <p class="edu-hint">ğŸ“Œ Best when: Moderately bullish with defined risk</p>
              </div>
              <div class="edu-block">
                <h4>ğŸ”½ Bear Put Spread</h4>
                <p><strong>Setup:</strong> Buy put (Kâ‚‚) + Sell put (Kâ‚), where Kâ‚ &lt; Kâ‚‚</p>
                <div class="edu-formula">Payoff = max(Kâ‚‚ âˆ’ S, 0) âˆ’ max(Kâ‚ âˆ’ S, 0) âˆ’ Net Debit<br>Max Profit = (Kâ‚‚ âˆ’ Kâ‚)
                  âˆ’ Net Debit<br>Max Loss = Net Debit<br>Breakeven = Kâ‚‚ âˆ’ Net Debit</div>
                <p class="edu-hint">ğŸ“Œ Best when: Moderately bearish with defined risk</p>
              </div>
              <div class="edu-block">
                <h4>â¬†ï¸â¬‡ï¸ Long Straddle</h4>
                <p><strong>Setup:</strong> Buy call (K) + Buy put (K) at same strike</p>
                <div class="edu-formula">Payoff = max(S âˆ’ K, 0) + max(K âˆ’ S, 0) âˆ’ C âˆ’ P<br>Max Profit = Unlimited<br>Max
                  Loss = C + P (total premium paid)<br>Breakeven = K Â± (C + P)</div>
                <p class="edu-hint">ğŸ“Œ Best when: Expecting a BIG move but unsure of direction</p>
              </div>
              <div class="edu-block">
                <h4>â†•ï¸ Long Strangle</h4>
                <p><strong>Setup:</strong> Buy OTM put (Kâ‚) + Buy OTM call (Kâ‚‚), Kâ‚ &lt; Kâ‚‚</p>
                <div class="edu-formula">Payoff = max(Kâ‚ âˆ’ S, 0) + max(S âˆ’ Kâ‚‚, 0) âˆ’ P âˆ’ C<br>Max Profit =
                  Unlimited<br>Max Loss = P + C (total premium paid)<br>Upper BE = Kâ‚‚ + (P + C)<br>Lower BE = Kâ‚ âˆ’ (P +
                  C)</div>
                <p class="edu-hint">ğŸ“Œ Best when: Expecting a BIG move, cheaper than straddle</p>
              </div>
            </div>
          </div>
        </details>

        <details class="edu-section card glass">
          <summary class="edu-toggle">ğŸ“š The Greeks â€” Risk Sensitivities</summary>
          <div class="edu-content">
            <div class="edu-grid">
              <div class="edu-block">
                <h4>Î” Delta</h4>
                <p>How much the option price changes per $1 move in the stock.</p>
                <div class="edu-formula">Call Î” = N(dâ‚) âˆˆ [0, 1]<br>Put Î” = N(dâ‚) âˆ’ 1 âˆˆ [âˆ’1, 0]</div>
                <p>Î” = 0.50 means: stock up $1 â†’ option up $0.50</p>
              </div>
              <div class="edu-block">
                <h4>Î“ Gamma</h4>
                <p>How fast Delta changes as the stock moves. Highest for ATM options.</p>
                <div class="edu-formula">Î“ = N'(dâ‚) / (S Â· Ïƒ Â· âˆšT)</div>
                <p>High Gamma = Delta can swing rapidly with small stock moves</p>
              </div>
              <div class="edu-block">
                <h4>Î˜ Theta</h4>
                <p>How much value the option loses per day due to time decay.</p>
                <div class="edu-formula">Î˜ = âˆ’[S Â· N'(dâ‚) Â· Ïƒ] / (2âˆšT) âˆ’ r Â· K Â· eâ»Ê³áµ€ Â· N(Â±dâ‚‚)</div>
                <p>Theta is almost always negative â€” options lose value over time</p>
              </div>
              <div class="edu-block">
                <h4>Î½ Vega</h4>
                <p>How much the option price changes per 1% change in implied volatility.</p>
                <div class="edu-formula">Î½ = S Â· N'(dâ‚) Â· âˆšT</div>
                <p>Higher Vega = more sensitive to volatility swings</p>
              </div>
              <div class="edu-block">
                <h4>ğŸ“ Black-Scholes Model</h4>
                <p>The foundational formula for option pricing (European options):</p>
                <div class="edu-formula">C = S Â· N(dâ‚) âˆ’ K Â· eâ»Ê³áµ€ Â· N(dâ‚‚)<br>P = K Â· eâ»Ê³áµ€ Â· N(âˆ’dâ‚‚) âˆ’ S Â·
                  N(âˆ’dâ‚)<br><br>where:<br>dâ‚ = [ln(S/K) + (r + ÏƒÂ²/2)T] / (ÏƒâˆšT)<br>dâ‚‚ = dâ‚ âˆ’ ÏƒâˆšT</div>
                <table class="edu-table">
                  <tr>
                    <td><strong>S</strong></td>
                    <td>Current stock price</td>
                  </tr>
                  <tr>
                    <td><strong>K</strong></td>
                    <td>Strike price</td>
                  </tr>
                  <tr>
                    <td><strong>T</strong></td>
                    <td>Time to expiry (in years)</td>
                  </tr>
                  <tr>
                    <td><strong>r</strong></td>
                    <td>Risk-free interest rate</td>
                  </tr>
                  <tr>
                    <td><strong>Ïƒ</strong></td>
                    <td>Volatility (standard deviation of returns)</td>
                  </tr>
                  <tr>
                    <td><strong>N(x)</strong></td>
                    <td>Cumulative standard normal distribution</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </details>
      </section>

      <!-- Trends Tab -->
      <section class="tab-panel" id="panel-trends">
        <div class="trends-grid">
          <div class="card glass">
            <h3>Settlement Price History</h3>
            <div class="trends-controls">
              <select id="trendExpiry">
                <option>Select stock first</option>
              </select>
              <select id="trendStrike">
                <option>Select expiry first</option>
              </select>
              <select id="trendType">
                <option value="call">Call</option>
                <option value="put">Put</option>
              </select>
            </div>
            <canvas id="settlementChart"></canvas>
          </div>
          <div class="card glass">
            <h3>Open Interest Over Time</h3>
            <canvas id="oiChart"></canvas>
          </div>
          <div class="card glass">
            <h3>Put/Call Ratio</h3>
            <canvas id="pcrChart"></canvas>
          </div>
          <div class="card glass">
            <h3>Volume Analysis</h3>
            <canvas id="volumeChart"></canvas>
          </div>
        </div>
        <details class="edu-section card glass">
          <summary class="edu-toggle">ğŸ“š Understanding Trend Indicators</summary>
          <div class="edu-content">
            <div class="edu-grid">
              <div class="edu-block">
                <h4>ğŸ“ˆ Settlement Price Trends</h4>
                <p>The settlement price is the official closing price set by SEOCH. Tracking it over time reveals the
                  market's valuation trend for a specific option.</p>
                <p>â€¢ <strong>Rising settlement</strong> = increasing demand / bullish sentiment</p>
                <p>â€¢ <strong>Falling settlement</strong> = decreasing demand / bearish sentiment</p>
              </div>
              <div class="edu-block">
                <h4>ğŸ“Š Open Interest (OI)</h4>
                <p>OI = total number of outstanding option contracts. Changes in OI signal money flow:</p>
                <table class="edu-table">
                  <tr>
                    <td><strong>Rising OI + Rising Price</strong></td>
                    <td>New money entering â†’ Trend confirmation</td>
                  </tr>
                  <tr>
                    <td><strong>Rising OI + Falling Price</strong></td>
                    <td>New shorts entering â†’ Bearish pressure</td>
                  </tr>
                  <tr>
                    <td><strong>Falling OI + Rising Price</strong></td>
                    <td>Short covering â†’ Weak rally</td>
                  </tr>
                  <tr>
                    <td><strong>Falling OI + Falling Price</strong></td>
                    <td>Long liquidation â†’ Weak decline</td>
                  </tr>
                </table>
              </div>
              <div class="edu-block">
                <h4>âš–ï¸ Put/Call Ratio (PCR)</h4>
                <p>PCR measures market sentiment by comparing put volume/OI to call volume/OI:</p>
                <div class="edu-formula">PCR = Put OI / Call OI</div>
                <table class="edu-table">
                  <tr>
                    <td><strong>PCR &lt; 0.7</strong></td>
                    <td>Bullish sentiment (more calls traded)</td>
                  </tr>
                  <tr>
                    <td><strong>PCR â‰ˆ 1.0</strong></td>
                    <td>Neutral / balanced sentiment</td>
                  </tr>
                  <tr>
                    <td><strong>PCR &gt; 1.3</strong></td>
                    <td>Bearish sentiment (more puts traded)</td>
                  </tr>
                  <tr>
                    <td><strong>Extreme PCR</strong></td>
                    <td>Contrarian signal â€” crowd may be wrong</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </details>
      </section>

      <!-- AI Prediction Tab -->
      <section class="tab-panel" id="panel-prediction">
        <div class="prediction-controls">
          <div class="card glass prediction-config">
            <h3>ğŸ§  LSTM Configuration</h3>
            <div class="pred-form-row">
              <div class="form-group">
                <label for="predExpiry">Expiry</label>
                <select id="predExpiry">
                  <option>Select stock first</option>
                </select>
              </div>
              <div class="form-group">
                <label for="predStrike">Strike (ATM)</label>
                <select id="predStrike">
                  <option>Select expiry first</option>
                </select>
              </div>
              <div class="form-group">
                <label for="predType">Option Type</label>
                <select id="predType">
                  <option value="call">Call</option>
                  <option value="put">Put</option>
                </select>
              </div>
            </div>
            <div class="pred-form-row">
              <div class="form-group">
                <label for="predLookback">Lookback (days)</label>
                <input type="number" id="predLookback" value="10" min="3" max="30">
              </div>
              <div class="form-group">
                <label for="predForecast">Forecast (days)</label>
                <input type="number" id="predForecast" value="5" min="1" max="15">
              </div>
              <div class="form-group">
                <label for="predEpochs">Epochs</label>
                <input type="number" id="predEpochs" value="50" min="10" max="200">
              </div>
            </div>
            <button class="btn btn-primary btn-glow" id="runLstmBtn">
              <span id="runLstmBtnText">âš¡ Run AI Prediction</span>
            </button>
            <div class="progress-bar-wrap" id="progressWrap" style="display:none">
              <div class="progress-bar" id="progressBar"></div>
              <span class="progress-text" id="progressText">Training...</span>
            </div>
          </div>

          <div class="card glass signal-card" id="signalCard">
            <h3>ğŸ“¡ LSTM Signal</h3>
            <div id="signalContent">
              <p class="placeholder-text">Run the model to get predictions</p>
            </div>
          </div>
        </div>

        <!-- Parallel Predictions Row -->
        <div class="prediction-dual">
          <div class="card glass">
            <h3>ğŸ“Š Settlement Price Prediction</h3>
            <canvas id="predictionChart"></canvas>
          </div>
          <div class="card glass news-card" id="newsCard">
            <h3>ğŸ“° News Sentiment</h3>
            <div id="newsContent">
              <p class="placeholder-text">News sentiment will appear after running predictions</p>
            </div>
          </div>
        </div>

        <!-- Combined Signal -->
        <div class="card glass combined-signal-card" id="combinedSignalCard" style="display:none">
          <h3>ğŸ”® Combined AI Signal</h3>
          <div id="combinedSignalContent"></div>
        </div>

        <div class="prediction-bottom">
          <div class="card glass">
            <h3>ğŸ¯ Recommended Strategy</h3>
            <div id="predStrategyContent">
              <p class="placeholder-text">Strategy recommendation will appear after prediction</p>
            </div>
            <canvas id="predPayoffChart" style="margin-top:16px"></canvas>
          </div>
          <div class="card glass">
            <h3>ğŸ”¬ Model Metrics</h3>
            <div id="modelMetrics">
              <p class="placeholder-text">Model details will appear after training</p>
            </div>
          </div>
        </div>

        <details class="edu-section card glass">
          <summary class="edu-toggle">ğŸ“š How the AI Predictions Work</summary>
          <div class="edu-content">
            <div class="edu-grid">
              <div class="edu-block">
                <h4>ğŸ§  LSTM Neural Network</h4>
                <p><strong>LSTM (Long Short-Term Memory)</strong> is a type of recurrent neural network designed to
                  learn patterns in sequential data like time series.</p>
                <div class="edu-formula">Architecture: Input â†’ LSTM(32 units) â†’ Dense(16) â†’ Dense(1)<br><br>The model
                  learns to predict the next price from a sliding window of past prices (the "lookback" period).</div>
                <p>LSTM cells have <strong>gates</strong> that control information flow:</p>
                <table class="edu-table">
                  <tr>
                    <td><strong>Forget Gate</strong></td>
                    <td>f = Ïƒ(W_f Â· [h_{t-1}, x_t] + b_f) â€” decides what to forget</td>
                  </tr>
                  <tr>
                    <td><strong>Input Gate</strong></td>
                    <td>i = Ïƒ(W_i Â· [h_{t-1}, x_t] + b_i) â€” decides what new info to store</td>
                  </tr>
                  <tr>
                    <td><strong>Output Gate</strong></td>
                    <td>o = Ïƒ(W_o Â· [h_{t-1}, x_t] + b_o) â€” decides what to output</td>
                  </tr>
                </table>
              </div>
              <div class="edu-block">
                <h4>ğŸ“Š Data Preparation</h4>
                <p>Before training, the price data is <strong>normalized</strong> to a 0â€“1 range using Min-Max scaling:
                </p>
                <div class="edu-formula">X_normalized = (X âˆ’ X_min) / (X_max âˆ’ X_min)</div>
                <p>Data is split into sliding windows:</p>
                <div class="edu-formula">Input: [P_t, P_{t+1}, ..., P_{t+lookback-1}]<br>Target: P_{t+lookback}</div>
                <p>80% of windows are used for training, 20% for validation.</p>
              </div>
              <div class="edu-block">
                <h4>ğŸ¯ Forecast & Signal Generation</h4>
                <p>After training, the model uses the last <em>lookback</em> prices to predict N future prices
                  iteratively:</p>
                <div class="edu-formula">Signal = "Bullish" if Avg Forecast &gt; Current Price<br>Signal = "Bearish" if
                  Avg
                  Forecast &lt; Current Price<br><br>Confidence = min(|% Change| Ã— 10, 95)%</div>
                <p>The model also computes <strong>RMSE</strong> (Root Mean Squared Error) to measure fit quality:</p>
                <div class="edu-formula">RMSE = âˆš(Î£(actual_i âˆ’ predicted_i)Â² / n)</div>
              </div>
              <div class="edu-block">
                <h4>ğŸ“° News Sentiment Analysis</h4>
                <p>Headlines from Yahoo Finance are scored using a <strong>financial keyword lexicon</strong> â€” a
                  dictionary of bullish/bearish terms with weights.</p>
                <div class="edu-formula">Article Score = Î£(bullish word weights) âˆ’ Î£(bearish word
                  weights)<br><br>Bullish words: "surge", "rally", "upgrade", "beat", ...<br>Bearish words: "crash",
                  "plunge", "downgrade", "miss", ...</div>
                <p>Each article receives a sentiment label: <span style="color:var(--accent-green)">â— Positive</span>,
                  <span style="color:var(--accent-orange)">â— Neutral</span>, or <span style="color:var(--accent-red)">â—
                    Negative</span>.
                </p>
              </div>
              <div class="edu-block">
                <h4>ğŸ”® Combined Signal</h4>
                <p>The final signal merges both models using weighted averaging:</p>
                <div class="edu-formula">Combined Score = 0.6 Ã— LSTM_score + 0.4 Ã— News_score<br><br>LSTM weight = 60%
                  (objective, data-driven)<br>News weight = 40% (market sentiment, subjective)</div>
                <p>Confidence is the weighted average of individual confidences, adjusted for agreement between models.
                </p>
              </div>
              <div class="edu-block">
                <h4>âš ï¸ Important Limitations</h4>
                <p>â€¢ LSTM trains on <strong>settlement prices only</strong> â€” no volume, OI, or fundamentals</p>
                <p>â€¢ Sentiment analysis uses a <strong>simple keyword matching</strong> â€” not deep NLP</p>
                <p>â€¢ Past patterns <strong>do not guarantee</strong> future results</p>
                <p>â€¢ This is a <strong>proof of concept</strong> â€” not a trading system</p>
              </div>
            </div>
          </div>
        </details>
      </section>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
      <p>Data source: HKEX DTOP Reports (Dec 2025 â€“ Feb 2026) Â· Settlement prices from SEOCH Â· Not financial advice</p>
    </footer>
  </div>

  <script>
    // Password gate â€” SHA-256 hash comparison (password not stored in plaintext)
    (function () {
      const HASH = 'cb4affc31bfeab6eaf9b2e6b034d2170b890056d30d1c85e229b8db1f3851eb0';
      async function sha256(str) {
        const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(str));
        return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2, '0')).join('');
      }
      function unlock() {
        document.getElementById('authGate').style.display = 'none';
        document.getElementById('app').style.display = '';
        sessionStorage.setItem('hk_auth', '1');
      }
      if (sessionStorage.getItem('hk_auth') === '1') { unlock(); }
      document.addEventListener('DOMContentLoaded', function () {
        const btn = document.getElementById('authSubmit');
        const inp = document.getElementById('authPassword');
        const err = document.getElementById('authError');
        async function check() {
          const h = await sha256(inp.value);
          if (h === HASH) { unlock(); } else { err.textContent = 'Incorrect password'; inp.value = ''; inp.focus(); }
        }
        btn.addEventListener('click', check);
        inp.addEventListener('keydown', function (e) { if (e.key === 'Enter') check(); });
        if (!sessionStorage.getItem('hk_auth')) inp.focus();
      });
    })();
  </script>
  <script type="module" src="/src/main.js"></script>
</body>

</html>